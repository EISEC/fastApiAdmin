import { type AvailableIconName } from '../components/ui/Icon';

/**
 * –ú–∞–ø–ø–∏–Ω–≥ –º–µ–∂–¥—É —ç–º–æ–¥–∑–∏/—Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∏ –Ω–∞—à–∏–º–∏ –∏–∫–æ–Ω–∫–∞–º–∏ HugeIcons
 */
export const iconMapping: Record<string, AvailableIconName> = {
  // –≠–º–æ–¥–∑–∏ -> HugeIcons
  '‚öôÔ∏è': 'settings',
  'üèóÔ∏è': 'edit',
  'üî•': 'fire',
  'üìù': 'edit',
  'üë§': 'user',
  'üìß': 'mail',
  '‚úèÔ∏è': 'edit',
  'üìã': 'file',
  'üéØ': 'fire',
  'üöÄ': 'fire',
  'üêõ': 'bug',
  '‚≠ê': 'star',
  'üí°': 'fire',
  'üîß': 'settings',
  'üì±': 'mobile',
  'üåê': 'globe',
  'üë•': 'users',
  'üìÑ': 'file',
  'üìÅ': 'folder',
  'üîê': 'lock',
  'üé®': 'palette',
  'üìä': 'dashboard',
  'üí∞': 'money',
  'üîç': 'search',
  '‚ö°': 'fire',
  'üéâ': 'star',
  'üìå': 'fire',
  'üåü': 'star',
  '‚¨ÜÔ∏è': 'arrowUp',
  '‚¨áÔ∏è': 'arrowDown',
  '‚óÄÔ∏è': 'arrowLeft',
  '‚ñ∂Ô∏è': 'arrowRight',
  '‚ùå': 'close',
  '‚úÖ': 'check',
  '‚ùì': 'question',
  '‚ùó': 'alert',
  'üóëÔ∏è': 'delete',
  'üîÑ': 'refresh',
  
  // –¢–µ–∫—Å—Ç–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è -> HugeIcons
  'general': 'settings',
  'appearance': 'palette',
  'seo': 'search',
  'notifications': 'fire',
  'security': 'shield',
  'integrations': 'link',
  'performance': 'fire',
  'developer': 'code',
  'database': 'database',
  'system': 'settings',
  'admin': 'user',
  'content': 'file',
  'media': 'image',
  'users': 'users',
  'posts': 'edit',
  'pages': 'file',
  'analytics': 'dashboard',
  'backups': 'database',
  'logs': 'file',
  'api': 'code',
  'cache': 'fire',
  'email': 'mail',
  'social': 'share',
  'payments': 'creditCard',
  'shipping': 'folder',
  'taxes': 'money',
  'reports': 'dashboard',
  'tools': 'settings',
  'help': 'question',
  'about': 'info',
  
  // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
  'setting': 'settings',
  'config': 'settings',
  'configuration': 'settings',
  'preferences': 'settings',
  'options': 'settings',
  'profile': 'user',
  'account': 'user',
  'dashboard': 'dashboard',
  'home': 'home',
  'overview': 'dashboard',
  'stats': 'dashboard',
  'statistics': 'dashboard',
  'metrics': 'dashboard',
  'inbox': 'mail',
  'messages': 'message',
  'contacts': 'users',
  'calendar': 'calendar',
  'schedule': 'calendar',
  'tasks': 'check',
  'todo': 'check',
  'projects': 'folder',
  'files': 'folder',
  'documents': 'file',
  'images': 'image',
  'photos': 'image',
  'videos': 'video',
  'audio': 'fire',
  'downloads': 'download',
  'uploads': 'upload',
  'trash': 'delete',
  'archive': 'folder',
  'favorites': 'star',
  'bookmarks': 'star',
  'tags': 'tag',
  'categories': 'folder',
  'filters': 'filter',
  'sort': 'fire',
  'search': 'search',
  'find': 'search',
  'edit': 'edit',
  'create': 'add',
  'new': 'add',
  'delete': 'delete',
  'remove': 'delete',
  'save': 'check',
  'export': 'download',
  'import': 'upload',
  'backup': 'database',
  'restore': 'refresh',
  'sync': 'refresh',
  'update': 'refresh',
  'reload': 'refresh',
  'refresh': 'refresh',
  'reset': 'refresh',
  'clear': 'close',
  'close': 'close',
  'cancel': 'close',
  'ok': 'check',
  'yes': 'check',
  'no': 'close',
  'info': 'info',
  'warning': 'warning',
  'error': 'alert',
  'success': 'check',
  'loading': 'loading',
  'spinner': 'loading',
};

/**
 * –ü–æ–ª—É—á–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ HugeIcons –ø–æ —ç–º–æ–¥–∑–∏ –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é
 * @param iconName - —ç–º–æ–¥–∑–∏, —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ —É–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏
 * @param fallback - –∏–∫–æ–Ω–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ –º–∞–ø–ø–∏–Ω–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω
 * @returns –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ HugeIcons
 */
export function getIconName(iconName: string | undefined, fallback: AvailableIconName = 'settings'): AvailableIconName {
  if (!iconName || typeof iconName !== 'string') {
    return fallback;
  }
  
  // –£–¥–∞–ª—è–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –∏ –ø—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É
  const cleanName = iconName.trim().toLowerCase();
  
  // –ï—Å–ª–∏ —ç—Ç–æ —É–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ
  if (isValidIconName(cleanName as AvailableIconName)) {
    return cleanName as AvailableIconName;
  }
  
  // –ò—â–µ–º –≤ –º–∞–ø–ø–∏–Ω–≥–µ
  const mappedIcon = iconMapping[iconName] || iconMapping[cleanName];
  if (mappedIcon) {
    return mappedIcon;
  }
  
  // –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
  for (const [key, value] of Object.entries(iconMapping)) {
    if (cleanName.includes(key.toLowerCase()) || key.toLowerCase().includes(cleanName)) {
      return value;
    }
  }
  
  return fallback;
}

/**
 * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –∏–º–µ–Ω–µ–º –∏–∫–æ–Ω–∫–∏
 */
function isValidIconName(name: string): name is AvailableIconName {
  // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, –Ω–æ –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true –¥–ª—è –ª—é–±–æ–π —Å—Ç—Ä–æ–∫–∏
  // –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–∫–æ–Ω–æ–∫
  return typeof name === 'string' && name.length > 0;
}

/**
 * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏
 */
export function renderSafeIcon(iconName: string | undefined, fallback: AvailableIconName = 'settings'): AvailableIconName {
  return getIconName(iconName, fallback);
} 