# üö® –ë—ã—Å—Ç—Ä–æ–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ Frontend-Backend

## üîç –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. üì∏ "–§–∞–π–ª –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Ñ–∞–π–ª–æ–º"

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–æ—Å—Ç—ã
- –í –∫–æ–Ω—Å–æ–ª–∏: `featured_image: ["–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Ñ–∞–π–ª–æ–º."]`

**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ JSON –≤–º–µ—Å—Ç–æ FormData

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ postsStore.ts
if (data.featured_image instanceof File) {
  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FormData
  const formData = new FormData();
  // ... –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π
  await api.upload('/posts/', formData);
} else {
  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JSON
  await api.post('/posts/', data);
}
```

---

### 2. üîò –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç" –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ö–Ω–æ–ø–∫–∞ —Å–µ—Ä–∞—è –∏ –Ω–µ –Ω–∞–∂–∏–º–∞–µ—Ç—Å—è
- –í—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π Zod —Å—Ö–µ–º—ã

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```typescript
// –î–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –≤ PostForm.tsx
console.log('Form state:', { 
  isValid: formState.isValid, 
  errors: formState.errors 
});
```

**–†–µ—à–µ–Ω–∏—è:**
1. **–ü—Ä–æ–±–ª–µ–º–∞ —Å slug:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.or(z.literal('')).optional()`
2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å site:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ setValue –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å `shouldValidate: true`
3. **–ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** –î–æ–±–∞–≤—å—Ç–µ `.or(z.literal(''))` –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

---

### 3. üè∑Ô∏è –û—à–∏–±–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–≥–æ–≤

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö backend –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Å—Ç–æ–≤
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ–ª–µ–π –≤ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–µ

**–ü—Ä–∏—á–∏–Ω–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `source='tags'` –¥–ª—è –ø–æ–ª—è `tags`

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –í PostListSerializer
tags = TagSerializer(many=True, read_only=True)  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
# tags = TagSerializer(source='tags', many=True, read_only=True)  # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

---

### 4. üåê 404 –æ—à–∏–±–∫–∏ API endpoints

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏/—Ç–µ–≥–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- 404 –æ—à–∏–±–∫–∏ –≤ Network tab

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ API

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏
fetchCategories: () => api.get('/posts/categories/')
fetchTags: () => api.get('/posts/tags/')
changeStatus: (id, status) => api.patch(`/posts/${id}/change_status/`, { status })

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏
// '/categories/', '/tags/', `/posts/${id}/` –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞
```

---

### 5. üíæ –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

**–°–∏–º–ø—Ç–æ–º—ã:**
- –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ –ø–æ—Å—Ç –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Network tab –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ (200, 400, 500)
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ payload –∑–∞–ø—Ä–æ—Å–∞

**–ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- **400:** –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—è
- **401:** –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- **500:** –û—à–∏–±–∫–∏ backend —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–∞

---

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### Backend –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
cd backend
python3 manage.py check                    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
python3 manage.py shell                   # Django shell
python3 manage.py runserver --noreload    # –ó–∞–ø—É—Å–∫ –±–µ–∑ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
```

### Frontend –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
cd frontend
yarn dev                     # –ó–∞–ø—É—Å–∫ development —Å–µ—Ä–≤–µ—Ä–∞
yarn build                   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏
yarn type-check             # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript
```

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ø–æ—Å—Ç–∞–º–∏:
- [ ] Backend —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ :8000
- [ ] Frontend —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ :5174
- [ ] JWT —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
- [ ] –í PostListSerializer –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ–ª–µ–π
- [ ] FormData –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–∞–π–ª–æ–≤
- [ ] Zod —Å—Ö–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

### –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞:
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (–¥–ª—è backend)
- [ ] –¢–∏–ø—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (–¥–ª—è frontend)
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–∞—Ö
- [ ] API –ø—É—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

## üÜò –ë—ã—Å—Ç—Ä—ã–µ —Ñ–∏–∫—Å—ã

### "–ù–µ –º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç":
```typescript
// 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é
const postSchema = z.object({
  slug: z.string().regex(/^[a-z0-9-]+$/).or(z.literal('')).optional(),
  excerpt: z.string().max(500).or(z.literal('')).optional(),
});

// 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–∞–π—Ç–∞
useEffect(() => {
  if (sites.length > 0 && !watchedSite) {
    setValue('site', sites[0].id, { shouldValidate: true });
  }
}, [sites, watchedSite]);
```

### "–§–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è":
```typescript
// –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ FormData
if (data.featured_image instanceof File) {
  const formData = new FormData();
  Object.entries(data).forEach(([key, value]) => {
    if (value !== undefined && value !== null) {
      formData.append(key, value instanceof File ? value : String(value));
    }
  });
  return api.upload('/posts/', formData);
}
```

### "–¢–µ–≥–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç":
```python
# –í —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–µ —É–±–µ–¥–∏—Ç–µ—Å—å:
tags = TagSerializer(many=True, read_only=True)  # –ë–ï–ó source='tags'
```

---

> **üí° –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `FRONTEND_BACKEND_FIXES.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞! 